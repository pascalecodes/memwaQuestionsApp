<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memwa Sort Results</title>

    <!-- google font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Edu+TAS+Beginner:wght@500&display=swap" rel="stylesheet">
    <!-- icons -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
    integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
      <!-- stylesheet link -->
      <link rel="stylesheet" href="/style.css">
</head>

<body>
    <header class="header">
        <a href="/" ><img class="logo" src="/logo.svg" alt="MEMWA " ></a>
        <h2>Sort Results   "<%= searchValue %>"</h2>
        <p>Total questions: <%= questions.length %></p>
    </header>
    <!-- <section class="question-container">
        <div class="search"> 
            <form action="/search" method="GET">
                <input type="text" name="query" placeholder="Search...">
                <button type="submit">Search</button>
            </form>   
        </div>
    </section>
    <section class="question-container"> -->
        <!-- <ul>
          <% questions.forEach(function(question) { %>
            <li><%= question.name %>  <%= question.tag %></li>
          <% }); %>
        </ul> -->
        <!-- <section class='question'>
            <ul class="question-list">
                <% let index = 1; %>
                <% questions.forEach(question => {%>
                    <li id="question-<%= question.id %>"  class="question-list-item">
                    
                        <div class="number question-list-item-title">
                            <%= index %>. <%= question.name %>
                        </div>
                        <div class="question-list-item-content">
                            <%= question.tag %>
                           
                            <% if (user) { %> 
                            <a href="/edit/<%=question._id %>" class="edit"><span class='fas fa-edit'></span> </a>
                            <a href="/remove/<%=question._id %>" class="remove" onclick="return confirm('Are you sure you want to delete this question?');"><span class='fas fa-times'></span></a>
                            <% } %>
                        </div>
                    </li>
                    <% index++; %>
                <% }) %>
            </ul>

        </section> -->
<!-- working form -->
        <!-- <form action="/sort" method="GET">
            <select name="sortBy" onchange="this.form.submit()">
                <option value="tag" <%= sortBy === 'tag' ? 'selected' : '' %>>Sort by Tag</option>
                <option value="group" <%= sortBy === 'group' ? 'selected' : '' %>>Sort by Group</option>
                <option value="category" <%= sortBy === 'category' ? 'selected' : '' %>>Sort by Category</option>
            </select>
        </form>
    
        <ul>
            <% questions.forEach(question => { %>
                <li><strong><%= question.id %></strong>: <%= question.name %> (Category: <%= question.category %>)</li>
            <% }) %>
        </ul>

<button onclick="window.location.href = '/' " class="home">HOME</button> -->
    <!-- </section> -->


   <!-- test new -->
   <section class="question-container">
    <div class="search"> 
        <form action="/sort" method="GET">
            <select name="sortBy" onchange="this.form.submit()">
                <option value="category" <%= sortBy === 'category' ? 'selected' : '' %>>Sort by Category</option>
                <option value="group" <%= sortBy === 'group' ? 'selected' : '' %>>Sort by Group</option>
                <option value="tag" <%= sortBy === 'tag' ? 'selected' : '' %>>Sort by Tag</option>
            </select>
        
            <select name="searchValue">
                <option value="">Select a value</option>
                <% if (sortBy === 'category') { %>
                    <% categories.forEach(category => { %>
                        <option value="<%= category %>" <%= searchValue === category ? 'selected' : '' %>><%= category %></option>
                    <% }) %>
                <% } else if (sortBy === 'group') { %>
                    <% groups.forEach(group => { %>
                        <option value="<%= group %>" <%= searchValue == group ? 'selected' : '' %>><%= group %></option>
                    <% }) %>
                <% } else if (sortBy === 'tag') { %>
                    <% tags.forEach(tag => { %>
                        <option value="<%= tag %>" <%= searchValue === tag ? 'selected' : '' %>><%= tag %></option>
                    <% }) %>
                <% } %>
            </select>
        
                <button type="submit">Sort</button>
            </form>  
    </div>
    </section>
    <section class="question-container">
   <!-- <form action="/sort" method="GET">
    <select name="sortBy" onchange="this.form.submit()">
        <option value="category" <%= sortBy === 'category' ? 'selected' : '' %>>Sort by Category</option>
        <option value="group" <%= sortBy === 'group' ? 'selected' : '' %>>Sort by Group</option>
        <option value="tag" <%= sortBy === 'tag' ? 'selected' : '' %>>Sort by Tag</option>
    </select>

    <select name="searchValue">
        <option value="">Select a value</option>
        <% if (sortBy === 'category') { %>
            <% categories.forEach(category => { %>
                <option value="<%= category %>" <%= searchValue === category ? 'selected' : '' %>><%= category %></option>
            <% }) %>
        <% } else if (sortBy === 'group') { %>
            <% groups.forEach(group => { %>
                <option value="<%= group %>" <%= searchValue == group ? 'selected' : '' %>><%= group %></option>
            <% }) %>
        <% } else if (sortBy === 'tag') { %>
            <% tags.forEach(tag => { %>
                <option value="<%= tag %>" <%= searchValue === tag ? 'selected' : '' %>><%= tag %></option>
            <% }) %>
        <% } %>
    </select>

        <button type="submit">Sort</button>
    </form> -->
    <section class='question'>
        <ul class="question-list">

            <% let i = 1; %>
            <% questions.forEach(question => { %>
                <li id="question-<%= question.id %>"  class="question-list-item">
                    
                    <div class="number question-list-item-title">
                        <%= i %>. <%= question.name %>
                    </div>
                    <div class="question-list-item-content">
                        <%= question.tag %>
                       
                        <% if (user) { %> <!-- Add the login status check -->
                        <a href="/edit/<%=question._id %>" class="edit"><span class='fas fa-edit'></span> </a>
                        <a href="/remove/<%=question._id %>" class="remove" onclick="return confirm('Are you sure you want to delete this question?');"><span class='fas fa-times'></span></a>
                        <% } %>
                    </div>
                </li>
                <% i++; %>
            <% }) %>
        </ul>

    </section>

<button onclick="window.location.href = '/' " class="home">HOME</button>
</section>
</body>


</html>